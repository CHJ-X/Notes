# 操作系统第一章：引论

## 1.1 什么是操作系统

 操作系统是一种运行在内核态的软件，概括起来主要有两个作用

* 1. 为应用程序（程序员）提供资源集的清晰抽象
* 2. 管理硬件资源

> 资源管理有两种方式进行多路复用（共享）资源：时间上复用和空间上复用：
>
> * 时间上复用：轮流使用，时间上纵向排队使用，如cpu指令、流水线啥的。
> * 空间上复用：每个程序使用资源的一部分，时间上平行使用，多个位置，一人坐一个，如内存的分配。

------------

## 1.2  操作系统的历史

* 第一代：（1945~1955）真空管和穿孔卡片   _无政府状态_  
* 第二代：（1955~1965）晶体管和批处理系统   _君主政体_  
* 第三代：（1965~1980）集成电路和多道程序设计  _封建制度_  
* 第四代：（1980年至今）个人计算机（大规模集成电路）  _资本主义or共产主义_  
* 第五代：（1990年至今）移动计算机（手机、平板）  

------------

## 1.3  计算机硬件简介

### 1.3.1 处理器（CPU）

从内存中读出指令，解码并执行之。

__三阶段流水线__：取址、解码、执行

__超标量CPU__：多个执行单元，两个或更多的指令同时取出、解码，放入暂存缓冲区，然后直至它们执行完毕。

__多核与多线程__(multichips and multithreads)

### 1.3.2 存储器（MEMORY）

> 访问时间：寄存器 < 高速缓存 < 主存 < 磁盘  
> 容量相反

### 1.3.3 磁盘（DISK）

每个二进制位成本同RAM比低两个数量级，随机访问速度慢三个数量级

### 1.3.4 I/O设备

I/O device 一般包含设备控制器和设备本身
OS通常需要设备控制驱动来操作设备控制器

## 1.5 操作系统概念

### 1.5.1 进程

__进程__(process): a running program;
>includes:  
>--Address space  
>--Process table entries(state, registers)

Processor(CPU) Management  
Goals  
>time sharing  
>Multiple CPU allocation

Issues

### 1.5.3 文件

__pipe__(管道/虚文件)

### 1.5.4 I/O

每个OS都有管理其I/O设备的I/O子系统

### 1.5.5 保护(Protection)

关系系统的安全性依靠操作系统

文件的安全
>UNIX系统：9位二进制保护代码

### 1.5.6 the shell

* 操作系统的命令解析器：shell  
* 操作系统是终端用户与操作系统之间的接口，除非图形操作接口  

## 1.6 System Call(系统调用)

* 进程操作

```shell
#创建子进程
pid = fork()
#等一个子进程 to terminate
pid = waitpid(pid, &statioc, options)
#替换进程核心image
s = execve(name, argv, environp)
#终止进程，return status
exit(status)
```

* Linking  
文件共享

* Mounting
改变文件目录结构

## 1.7 操作系统结构

* Monolithic system(单体/整体)

>分成简单的三层：  
>主过程、服务过程、实用过程

* Layer Systems (层次结构)

>分为六层，上层软件都是在下层软件的基础上构建的

* Microkernels (微内核)

* Client-Server Model (客户端-服务器模式)  

>服务器提供资源，客户端使用资源

* Virtual Machine (虚拟机)  

>同时运行多个操作系统

* Exokernel (外核)  

>为虚拟机分配资源
